<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Gloopi Token Scanner</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    input { width: 320px; padding: 5px; font-size: 16px; }
    button { padding: 6px 12px; font-size: 16px; }
    #result { margin-top: 20px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h2>Gloopi 全鏈代幣掃描器</h2>
  <input type="text" id="address" placeholder="輸入代幣合約地址或 Solana 地址" />
  <button onclick="scanToken()">查詢</button>
  <div id="result"></div>

  <script>
    async function scanToken() {
      const address = document.getElementById('address').value.trim();
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = '查詢中...';

      // 嘗試使用 Dexscreener API 查詢（EVM鏈）
      try {
        const dexUrl = `https://api.dexscreener.com/latest/dex/tokens/${address}`;
        const dexRes = await fetch(dexUrl);
        const dexData = await dexRes.json();

        if (dexData.pairs && dexData.pairs.length > 0) {
          const pair = dexData.pairs[0];
          const info = `
鏈別：${pair.chainId}
代幣名稱：${pair.baseToken.name} (${pair.baseToken.symbol})
價格：$${pair.priceUsd}
市值：$${pair.fdv ? pair.fdv.toLocaleString() : '未知'}
持有流動性池：${pair.liquidity.usd.toLocaleString()} USD
來源：Dexscreener`;
          resultDiv.innerHTML = info;
          return;
        }
      } catch (err) {
        console.error('Dexscreener查詢失敗', err);
      }

      // 嘗試查 Solana（一般為44字元地址）
      if (address.length === 44) {
        try {
          const solUrl = `https://public-api.solscan.io/token/meta?tokenAddress=${address}`;
          const solRes = await fetch(solUrl, { headers: { 'accept': 'application/json' }});
          const solData = await solRes.json();

          if (solData.symbol) {
            const info = `
鏈別：Solana
代幣名稱：${solData.name} (${solData.symbol})
總供應量：${solData.supply}
Decimal：${solData.decimals}
來源：Solscan`;
            resultDiv.innerHTML = info;
            return;
          }
        } catch (err) {
          console.error('Solana查詢失敗', err);
        }
      }

      // 無法辨識
      resultDiv.innerHTML = '無法查詢到此地址的代幣資訊，請檢查格式或換其他代幣地址試試看。';
    }
  </script>
</body>
</html>
